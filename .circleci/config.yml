version: 2
jobs:
  build:
    machine: True
    working_directory: ~/test-containers
    steps:
    - checkout
    - run:
        name: install dependencies
        command: |
          sudo add-apt-repository -y ppa:deadsnakes/ppa
          sudo apt-get update
          sudo apt-get install -y python3.6 python3.6-venv
          /usr/bin/python3.6  -m venv venv
          source venv/bin/activate
          pip install .
    - run:
        name: run tests
        command: |
          source venv/bin/activate
          python tests/test-test-containers.py
